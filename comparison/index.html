



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/terminal.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.5.0">
    
    
      
        <title>Cliar vs. Click vs. docopt - Cliar: Create modular Python CLIs with type annotations and inheritance</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#00bcd4">
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,400,400i,700|PT+Mono&display=fallback">
        <style>body,input{font-family:"PT Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"PT Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-120535275-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="cyan" data-md-color-accent="cyan">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#cliar-vs-click-vs-docopt" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Cliar: Create modular Python CLIs with type annotations and inheritance" class="md-header-nav__button md-logo">
          
            <img src="../assets/terminal.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Cliar: Create modular Python CLIs with type annotations and inheritance
            </span>
            <span class="md-header-nav__topic">
              
                Cliar vs. Click vs. docopt
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/moigagoo/cliar/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Cliar: Create modular Python CLIs with type annotations and inheritance" class="md-nav__button md-logo">
      
        <img src="../assets/terminal.svg" width="48" height="48">
      
    </a>
    Cliar: Create modular Python CLIs with type annotations and inheritance
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/moigagoo/cliar/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../tutorial/" title="Tutorial" class="md-nav__link">
      Tutorial
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Cliar vs. Click vs. docopt
      </label>
    
    <a href="./" title="Cliar vs. Click vs. docopt" class="md-nav__link md-nav__link--active">
      Cliar vs. Click vs. docopt
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#modular-clis" class="md-nav__link">
    Modular CLIs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dsl-free" class="md-nav__link">
    DSL-Free
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#magic-free" class="md-nav__link">
    Magic-Free
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-casting" class="md-nav__link">
    Type Casting
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#modular-clis" class="md-nav__link">
    Modular CLIs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dsl-free" class="md-nav__link">
    DSL-Free
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#magic-free" class="md-nav__link">
    Magic-Free
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-casting" class="md-nav__link">
    Type Casting
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/moigagoo/cliar/edit/develop/docs/src/comparison.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="cliar-vs-click-vs-docopt">Cliar vs. Click vs. docopt<a class="headerlink" href="#cliar-vs-click-vs-docopt" title="Permanent link">&para;</a></h1>
<p>It may seem strange to develop yet another Python package for CLI creation when we already have great tools like Click and docopt. Why not use one of those?</p>
<p>It turns out there's at least one area where Click and docopt just won't do—<em>modular CLI</em>. Below, I'll try to explain what I mean by modular CLIs and why they are important. A will also cover other things that make Cliar special.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Modular CLIs</th>
<th>DSL-free</th>
<th>Magic-free</th>
<th>Type casting</th>
<th>Pun in name</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://moigagoo.github.io/cliar/">Cliar</a></td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
<tr>
<td><a href="http://click.pocoo.org/">Click</a></td>
<td>❌</td>
<td>✔</td>
<td>❌</td>
<td>✔</td>
<td>✔</td>
</tr>
<tr>
<td><a href="http://docopt.org/">docopt</a></td>
<td>❌</td>
<td>❌</td>
<td>✔</td>
<td>❌</td>
<td>❌</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Of course, any tool lets you do anything. When I say "feature X is not supported by tool Y," I mean that the effort needed to implement X with Y is <em>in my opinion</em> too high.</p>
<p>Conclusions are based on official docs of the tools being compared.</p>
<p>Feel free to disagree.</p>
</div>
<h2 id="modular-clis">Modular CLIs<a class="headerlink" href="#modular-clis" title="Permanent link">&para;</a></h2>
<p>Imagine you're developing a CLI-based audio player. You want it to have a ton of features but you don't want to develop them all on your own. The core version will only play a given file, but the rest of the functionality will be implemented with extensions.</p>
<p>You want the usage of the player to be something like this:</p>
<div class="codehilite"><pre><span></span>$ player play file.mp3          <span class="c1"># Core functionality</span>
$ pip install player.ext.seek   <span class="c1"># Install extension</span>
$ player seek <span class="s2">&quot;1:23&quot;</span>            <span class="c1"># Extension-provided functionality</span>
</pre></div>


<p>This approach has several benefits:</p>
<ul>
<li>the user will be able to install only the parts they need</li>
<li>you will be able to delegate responsibility to the community</li>
<li>new commands are added via a unified API, which is the same for core and third-party developers</li>
</ul>
<p>So, your job is provide a way for third parties to add commands to the basic CLI and override existing commands.</p>
<p><strong>With docopt</strong> this is almost impossible since CLIs are declared in plaintext using a DSL:</p>
<div class="codehilite"><pre><span></span><span class="sd">&#39;&#39;&#39;Player.</span>

<span class="sd">Usage:</span>
<span class="sd">  player play &lt;file&gt;</span>
<span class="sd">  player (-h | --help)</span>

<span class="sd">Options:</span>
<span class="sd">  -h --help     Show this screen.</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="kn">from</span> <span class="nn">docopt</span> <span class="kn">import</span> <span class="n">docopt</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="n">docopt</span><span class="p">(</span><span class="vm">__doc__</span><span class="p">)</span>
</pre></div>


<p>Adding a new command means adding a line into a spec before it gets parsed, so the only way an extension can add a new command to the base CLI is by inserting lines into the base CLI spec. This is inconvenient if you're adding one command, but it's a nightmare if you're creating an API for adding unlimited commands:</p>
<div class="codehilite"><pre><span></span><span class="sd">&#39;&#39;&#39;Player.</span>

<span class="sd">Usage:</span>
<span class="sd">  player play &lt;file&gt;</span>
<span class="sd">  player (-h | --help)</span>

<span class="sd">Options:</span>
<span class="sd">  -h --help     Show this screen.</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="kn">from</span> <span class="nn">docopt</span> <span class="kn">import</span> <span class="n">docopt</span>

<span class="kn">from</span> <span class="nn">player.ext.seek</span> <span class="kn">import</span> <span class="n">insert_seek_command</span>
<span class="c1"># &quot;insert_seek_command&quot; function inserts &quot;player seek &lt;pos&gt;&quot;</span>
<span class="c1"># after &quot;player play&quot;. You can already feel how quickly it gets old.</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">extended_doc</span> <span class="o">=</span> <span class="n">insert_seek_command</span><span class="p">(</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="n">docopt</span><span class="p">(</span><span class="n">extended_doc</span><span class="p">)</span>
</pre></div>


<p><strong>With Click</strong>, you can reuse commands from one CLI in another one:</p>
<div class="codehilite"><pre><span></span><span class="c1"># In file a:</span>
<span class="n">cli</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">Group</span><span class="p">()</span>

<span class="nd">@cli</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cmd_a</span><span class="p">():</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You called cmd_a&quot;</span><span class="p">)</span>


<span class="c1"># In file b:</span>

<span class="kn">from</span> <span class="nn">a</span> <span class="kn">import</span> <span class="n">cli</span>

<span class="nd">@cli</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cmd_b</span><span class="p">():</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You called cmd_b&quot;</span><span class="p">)</span>
</pre></div>


<blockquote>
<p>Thanks to /u/Brian for the <a href="https://www.reddit.com/r/Python/comments/3j28oa/cliar_create_clis_clearly_cliar_103_documentation/culnqg2">code sample</a>.</p>
</blockquote>
<p>However, you can't reuse commands from multiple third-party modules in one CLI, which is what we want. That's because command reuse relations are defined with decorators, and you can't decorate an imported function. In other words, you can create a new player that implements <code>seek</code> and borrows <code>play</code> from <code>player</code>, but you can't add <code>seek</code> into <code>player</code>.</p>
<p><strong>With Cliar</strong>, extending an existing CLI is trivial. Since in Cliar a CLI is a regular Python class, extending it means extending the class the most natural way—with inheritance. Just subclass your CLI from as many <code>Cliar</code> ancestors as you need:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">cliar</span> <span class="kn">import</span> <span class="n">Cliar</span>

<span class="c1"># Basic CLI:</span>
<span class="k">class</span> <span class="nc">BasicCLI</span><span class="p">(</span><span class="n">CLiar</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c1"># Seek extension:</span>
<span class="k">class</span> <span class="nc">SeekCLI</span><span class="p">(</span><span class="n">Cliar</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c1"># Complete CLI:</span>

<span class="k">class</span> <span class="nc">CLI</span><span class="p">(</span><span class="n">BasicCLI</span><span class="p">,</span> <span class="n">SeekCLI</span><span class="p">,</span> <span class="o">*</span><span class="n">MoreExtensions</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;The complete CLI that borrows from the basic CLI and extensionss.</span>

<span class="sd">    Notice that the class body is empty: the logic is already implemented by the parents.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">pass</span>
</pre></div>


<p>Cliar relies on Python's standard mechanisms and doesn't reinvent the wheel when it comes to adding new features to objects. Python supports both single and multiple inheritance, so CLI extension goes both ways: you can create a completely new interface that borrows from an existing one or build an interface from extensions.</p>
<h2 id="dsl-free">DSL-Free<a class="headerlink" href="#dsl-free" title="Permanent link">&para;</a></h2>
<p>DSLs should be avoided when pure Python is enough. A DSL requires time to learn, and the knowledge you gain is useless outside the scope of the DSL, which is by definition the app it's used in.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This thought has been explained by Robert E Brewer in <a href="https://pyvideo.org/pycon-us-2010/pycon-2010--the-zen-of-cherrypy---111.html">The Zen in CherryPy</a>.</p>
</div>
<p><strong>In Docopt</strong>, you describe your CLI using a DSL. Then, you ask docopt to parse the commandline string and pass the extracted values to the business logic. The interface is completely separated from the business logic.</p>
<p>It may seem a good idea until you actually start using docopt. What happens is you end up duplicating argument definitions all the time:</p>
<div class="codehilite"><pre><span></span><span class="sd">&#39;&#39;&#39;Player.</span>

<span class="sd">Usage:</span>
<span class="sd">  player play &lt;file&gt;</span>
<span class="sd">  player seek &lt;position&gt;</span>
<span class="sd">  player (-h | --help)</span>

<span class="sd">Options:</span>
<span class="sd">  -h --help     Show this screen.</span>
<span class="sd">&#39;&#39;&#39;</span>                                     <span class="c1"># one time</span>
<span class="kn">from</span> <span class="nn">docopt</span> <span class="kn">import</span> <span class="n">docopt</span>


<span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>                         <span class="c1"># two times</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">seek</span><span class="p">(</span><span class="n">position</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="n">docopt</span><span class="p">(</span><span class="vm">__doc__</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;play&#39;</span><span class="p">):</span>           <span class="c1"># three times</span>
        <span class="n">play</span><span class="p">(</span><span class="n">arguments</span><span class="p">[</span><span class="s1">&#39;&lt;file&gt;&#39;</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;seek&#39;</span><span class="p">):</span>
        <span class="n">seek</span><span class="p">(</span><span class="n">arguments</span><span class="p">[</span><span class="s1">&#39;&lt;position&gt;&#39;</span><span class="p">])</span>
    <span class="o">...</span>                                 <span class="c1"># ...and it goes on and on and on.</span>
</pre></div>


<p>Even in this toy example you can see how much redundant code this pattern spawns.</p>
<p><strong>Click</strong> and <strong>Cliar</strong> are DSL-free. Whereas docopt is "spec first," Click and Cliar are "code first": they generate the usage text from the code, not the other way around.</p>
<h2 id="magic-free">Magic-Free<a class="headerlink" href="#magic-free" title="Permanent link">&para;</a></h2>
<p><em>Magic</em> is unusual behavior driven by a hidden mechanism. It may give a short "wow" effect, but the price to pay is that code becomes harder to debug and harder to follow. Writing idiomatic Python generally means avoiding magic.</p>
<p>To see if a tool is "magical," remove it from the code and see if the code breaks.</p>
<p><strong>Docopt</strong>, for example, is magic-free. If you remove the <code>__doc__</code> parsing part, the remaining code is still 100% valid Python. Removing docopt does not break you program, it just removes the commandline parsing functionality:</p>
<div class="codehilite"><pre><span></span><span class="sd">&#39;&#39;&#39;Player.</span>

<span class="sd">Usage:</span>
<span class="sd">  player play &lt;file&gt;</span>
<span class="sd">  player (-h | --help)</span>

<span class="sd">Options:</span>
<span class="sd">  -h --help     Show this screen.</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="c1"># from docopt import docopt</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># arguments = docopt(__doc__)</span>
    <span class="k">pass</span>
</pre></div>


<p><strong>Click</strong>, on the other hand, is full of magic. Let's examine the hello world example from the <a href="http://click.pocoo.org/">Click documentation</a>:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;--count&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Number of greetings.&#39;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;Your name&#39;</span><span class="p">,</span>
              <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The person to greet.&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Simple program that greets NAME for a total of COUNT times.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">hello</span><span class="p">()</span>
</pre></div>


<p>Note that <code>hello</code> function accepts two positional arguments, <code>count</code> and <code>name</code>, but we call it without any arguments. That's because the params are added by the decorators based on the arguments of the decorator generators (<code>--count</code> and <code>--name</code>). This is broken code only forced to work by the magic of Click's decorators.</p>
<p><strong>Cliar</strong> is magic-free. Your CLI classes are regular Python classes. If you remove <code>Cliar</code> from its parents, the class will remain functional. It will continue to contain all the business logic, only without the CLI:</p>
<div class="codehilite"><pre><span></span><span class="c1"># from cliar import Cliar</span>

<span class="c1"># class Player(Cliar):</span>
<span class="k">class</span> <span class="nc">Player</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Playing </span><span class="si">{file}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>


<p>Cliar's decorators like <code>set_name</code> or <code>add_aliases</code> can also be safely remove without breaking any code.</p>
<h2 id="type-casting">Type Casting<a class="headerlink" href="#type-casting" title="Permanent link">&para;</a></h2>
<p>In commandline, any argument or flag value is a string. Converting strings to numbers and other types manually within business logic is tedious, requires dancing with exception handling, and, most importantly, has nothing to do with the business logic itself: it's a necessity induced by the fact the shell works only with strings and Python works with all sorts of types.</p>
<p><strong>Docopt</strong> doesn't attempt to cast types. It just parses a string into smaller ones in a nicely structured way, leaving all the necessary processing to the programmer:</p>
<div class="codehilite"><pre><span></span><span class="n">args</span> <span class="o">=</span> <span class="n">docopt</span><span class="p">(</span><span class="vm">__doc__</span><span class="p">)</span>

<span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="s1">&#39;play&#39;</span><span class="p">]:</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;&lt;file&gt;&#39;</span><span class="p">])</span>
</pre></div>


<p><strong>Click</strong> lets you define an argument and option type in the decorator constructor:</p>
<div class="codehilite"><pre><span></span><span class="nd">@click</span><span class="o">.</span><span class="n">argument</span><span class="p">(</span><span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
</pre></div>


<p>If the type is not set, Click tries to infer it from the default value. It that's not set as well, string is assumed.</p>
<p><strong>Cliar</strong> lets you define argument and option type with type hints. The logic is similar to Click's: if the type hint is given, use it, if not, infer the type from the default value, otherwise assume string:</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">file</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../tutorial/" title="Tutorial" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Tutorial
              </span>
            </div>
          </a>
        
        
          <a href="../changelog/" title="Changelog" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Changelog
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <p>Created by <a href="https://github.com/moigagoo/">Constantine Molchanov</a> using <a href="https://foliant.rocks">Foliant</a>.</p>
<p>Icons made by <a href="https://www.flaticon.com/authors/inipagistudio" title="inipagistudio">inipagistudio</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></p>

          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/moigagoo/cliar" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a8b5e56f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>